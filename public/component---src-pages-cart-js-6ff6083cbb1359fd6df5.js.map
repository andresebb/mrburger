{"version":3,"sources":["webpack:///./src/components/back.js","webpack:///./src/images/remove.svg","webpack:///./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack:///./src/components/Cart.js","webpack:///./src/pages/cart.js","webpack:///./src/images/previous.svg"],"names":["back","className","to","width","src","backIcon","alt","module","exports","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","loadScript","params","Promise","resolve","reject","window","Stripe","console","warn","script","scripts","document","querySelectorAll","concat","i","length","test","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","stripePromise$1","then","loadCalled","err","Cart","useContext","CartContext","cart","removeCart","useState","total","setTotal","stripe","setStripe","useEffect","reduce","acc","current","precio","quantity","process","handleSubmit","e","a","preventDefault","prod","map","price","redirectToCheckout","lineItems","mode","successUrl","cancelUrl","handleRemove","carrito","find","item","nombre","target","parentElement","firstElementChild","lastElementChild","textContent","filter","remove","product","imagen","onClick","removeIcon","type","placeholder"],"mappings":"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","file":"component---src-pages-cart-js-6ff6083cbb1359fd6df5.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"gatsby\";\r\nimport backIcon from \"../images/previous.svg\";\r\n\r\nconst back = () => {\r\n  return (\r\n    <div>\r\n      <Link className=\"back-button\" to=\"/\">\r\n        <img width=\"15px\" src={backIcon} alt=\"\" />\r\n        <p className=\"back-prop\">Back to Menu</p>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default back;\r\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiB4PSIwIiB5PSIwIiB2aWV3Qm94PSIwIDAgMjIuODggMjIuODgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiIGNsYXNzPSIiPjxnPg0KPHBhdGggeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBzdHlsZT0iIiBkPSJNMC4zMjQsMS45MDljLTAuNDI5LTAuNDI5LTAuNDI5LTEuMTQzLDAtMS41ODdjMC40NDQtMC40MjksMS4xNDMtMC40MjksMS41ODcsMGw5LjUyMyw5LjUzOSAgbDkuNTM5LTkuNTM5YzAuNDI5LTAuNDI5LDEuMTQzLTAuNDI5LDEuNTcxLDBjMC40NDQsMC40NDQsMC40NDQsMS4xNTksMCwxLjU4N2wtOS41MjMsOS41MjRsOS41MjMsOS41MzkgIGMwLjQ0NCwwLjQyOSwwLjQ0NCwxLjE0MywwLDEuNTg3Yy0wLjQyOSwwLjQyOS0xLjE0MywwLjQyOS0xLjU3MSwwbC05LjUzOS05LjUzOWwtOS41MjMsOS41MzljLTAuNDQ0LDAuNDI5LTEuMTQzLDAuNDI5LTEuNTg3LDAgIGMtMC40MjktMC40NDQtMC40MjktMS4xNTksMC0xLjU4N2w5LjUyMy05LjUzOUwwLjMyNCwxLjkwOXoiIGZpbGw9IiM5ZTllOWUiIGRhdGEtb3JpZ2luYWw9IiMxZTIwMWQiIGNsYXNzPSIiLz4NCjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8L2c+DQo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPC9nPg0KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjwvZz4NCjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8L2c+DQo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPC9nPg0KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjwvZz4NCjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8L2c+DQo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPC9nPg0KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjwvZz4NCjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8L2c+DQo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPC9nPg0KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjwvZz4NCjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8L2c+DQo8ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPC9nPg0KPGcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjwvZz4NCjwvZz48L3N2Zz4NCg==\"","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\n\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.9.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\n\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // own script injection.\n\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\n\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { CartContext } from \"../context\";\r\nimport { Link } from \"gatsby\";\r\nimport \"../styles/Cart.css\";\r\nimport removeIcon from \"../images/remove.svg\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport Back from \"./back\";\r\n\r\nconst Cart = () => {\r\n  const { cart, removeCart } = useContext(CartContext);\r\n  const [total, setTotal] = useState(0);\r\n  const [stripe, setStripe] = useState();\r\n\r\n  const getTotal = () => {\r\n    setTotal(\r\n      cart.reduce((acc, current) => acc + current.precio * current.quantity, 0)\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    getTotal();\r\n    setStripe(window.Stripe(process.env.STRIPE_PK));\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    let prod = cart.map(({ stripe, quantity }) => ({\r\n      price: stripe,\r\n      quantity: quantity,\r\n    }));\r\n\r\n    const { error } = await stripe.redirectToCheckout({\r\n      lineItems: prod,\r\n      mode: \"payment\",\r\n      successUrl: \"https://mrburger.netlify.app/success\",\r\n      cancelUrl: \"https://mrburger.netlify.app/fail\",\r\n    });\r\n    if (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  //Removiendo item del carrito\r\n\r\n  const handleRemove = (e) => {\r\n    //Encontrando el elemento que se elimino\r\n    const carrito = cart.find((item) => {\r\n      return (\r\n        item.nombre ===\r\n        e.target.parentElement.parentElement.firstElementChild.lastElementChild\r\n          .textContent\r\n      );\r\n    });\r\n\r\n    const carritoNuevo = cart.filter((item) => {\r\n      return item.nombre != carrito.nombre;\r\n    });\r\n\r\n    /* removeCart(carritoNuevo); */\r\n\r\n    //Quitandolo del dom\r\n    e.target.parentElement.parentElement.remove();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"bag\">\r\n        <Back />\r\n        <div className=\"title-container\">\r\n          <h2 className=\"bag-title\">BAG</h2>\r\n        </div>\r\n        <div className=\"bag-container\">\r\n          <div className=\"bag-products\">\r\n            <div className=\"table\">\r\n              <p>Product List</p>\r\n              <p className=\"center\">Quantity</p>\r\n              <p className=\"center\">Unit price</p>\r\n            </div>\r\n            {cart.map((product) => {\r\n              return (\r\n                <div>\r\n                  <div className=\"product-detail\">\r\n                    <div className=\"product-name\">\r\n                      <img\r\n                        className=\"product-img\"\r\n                        src={product.imagen}\r\n                        alt=\"\"\r\n                      />\r\n                      <p>{product.nombre}</p>\r\n                    </div>\r\n                    <p className=\"center\">{product.quantity}</p>\r\n                    <p className=\"center\">{product.precio}</p>\r\n                    <button className=\"boton-feo\" onClick={handleRemove}>\r\n                      <img className=\"remove-icon\" src={removeIcon} alt=\"\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className=\"bag-taxes\">\r\n            <input\r\n              className=\"tax-input\"\r\n              type=\"text\"\r\n              placeholder=\"Enter a code\"\r\n            />\r\n            <div className=\"tax-item\">\r\n              <p>Items Subtotal:</p>\r\n              <span>$ {total - 2.5}</span>\r\n            </div>\r\n            <div className=\"tax-item\">\r\n              <p>Delivery Fee:</p>\r\n              <span>$ 1</span>\r\n            </div>\r\n            <div className=\"tax-item\">\r\n              <p>Tax and fees:</p>\r\n              <span>$ 2.50</span>\r\n            </div>\r\n            <div className=\"tax-item mayor\">\r\n              <p>Total:</p>\r\n              <span>$ {total + 1}</span>\r\n            </div>\r\n            <button onClick={handleSubmit} className=\"btn-checkout\">\r\n              Proceed to checkout\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React from \"react\";\r\nimport Cart from \"../components/Cart\";\r\n\r\nconst cart = () => {\r\n  return (\r\n    <>\r\n      <Cart />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default cart;\r\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTUuNzUzIDU1Ljc1MyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTUuNzUzIDU1Ljc1MzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTEyLjc0NSwyMy45MTVjMC4yODMtMC4yODIsMC41OS0wLjUyLDAuOTEzLTAuNzI3TDM1LjI2NiwxLjU4MWMyLjEwOC0yLjEwNyw1LjUyOC0yLjEwOCw3LjYzNywwLjAwMQ0KCQljMi4xMDksMi4xMDgsMi4xMDksNS41MjcsMCw3LjYzN0wyNC4yOTQsMjcuODI4bDE4LjcwNSwxOC43MDZjMi4xMDksMi4xMDgsMi4xMDksNS41MjYsMCw3LjYzNw0KCQljLTEuMDU1LDEuMDU2LTIuNDM4LDEuNTgyLTMuODE4LDEuNTgycy0yLjc2NC0wLjUyNi0zLjgxOC0xLjU4MkwxMy42NTgsMzIuNDY0Yy0wLjMyMy0wLjIwNy0wLjYzMi0wLjQ0NS0wLjkxMy0wLjcyNw0KCQljLTEuMDc4LTEuMDc4LTEuNTk4LTIuNDk4LTEuNTcyLTMuOTExQzExLjE0NywyNi40MTMsMTEuNjY3LDI0Ljk5NCwxMi43NDUsMjMuOTE1eiIvPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=\""],"sourceRoot":""}